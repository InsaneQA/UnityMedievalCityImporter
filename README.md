# Introduction

https://watabou.itch.io/medieval-fantasy-city-generator
Using the link above you can find a totally magnificent city generator created by  [watabou](https://watabou.itch.io/ "watabou works").
Some time ago, the author also added the GeoJson export feature, so we can all use the exported cities!
This following importer uses the GeoJson to generate city from meshes and linestrings.
The objects generated by the Importer:
- Buildings
- Rivers
- Water
- Walls (with towers, of course!)
- Roads

## Prerequisites
- https://www.newtonsoft.com/json - you need to download the package and install the appropriate dll. Just unpack the .dll somewhere in the Assets folder, and you are ready to go.

## How to use the Importer
1. Go to https://watabou.itch.io/medieval-fantasy-city-generator and export a city as GeoJson.
2. Put the json file to the Unity <b>Resources</b> folder. Rename it to your heart content.
3. Export GeoJson and Newtonsoft.Json mentioned in the Prerequisites.
4. Download and export the <b>UnityMedievalCityImporter.unitypackage.</b>
5. Drag the CityGenerator prefab from the LevelGeneration folder into the Hierarchy in instantiate it.
6. Select the CityGenerator object. In the Json Name specify the json name.
7. Specify the folder that the new city is going to be saved to. <b>If such directory doensn't exist, the city will not be saved!</b> (however, you can save it manually, so really, no need to be OCD about it)
8. *(Optional)* Select the Creators gameobject (it's a child of the CityGenerator). Update the folder in the MeshFolder component.
9. *(Optional)* You can uncheck the *Create Walls Separately* checkbox in the Wall Creator component. This flag allows the walls to be (you guessed it!) created separately from one another, so the unnecessary walls could easily be removed (e.g. the walls are often generated near the water)
10. Click *Generate City Prefab* button on the CityGenerator object. 
11. DONE!

The prefab will be saved in the specified directory after some time (it might take more than a minute to generate a large city). After being created, the city will remain in the hierarchy, and can be safely removed.
If your objects are pink - don't worry, that's because the materials are missing the appropriate shaders. Just go to the CityMaterials folder and update the materials with any shader you like. 

## Known issues
1. The multi-corner castles look like a steaming pile of crap, frankly. The meshes generated for such figures are usually pretty complex and I'm looking for a way to place them correctly.
2. The generated objects don't use any shaders. I suck at shaders, sorry. Also, the shader might be missing since the project was created in the LWRP, so just update the shader in the corresponding material.
